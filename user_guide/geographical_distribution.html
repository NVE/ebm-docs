

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Geographical distribution &mdash; EBM - Energibruksmodell  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=9ed7352e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Model configuration" href="configuration.html" />
    <link rel="prev" title="Input files" href="../input_description.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            EBM - Energibruksmodell
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about_the_model.html">About EBM</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results.html">Result files</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_case.html">User case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input_description.html">Input files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Geographical distribution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-arguments">Additional arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Model configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Model Functionality</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../model_description/index.html">Model Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../limitations.html">Limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_parameters/index.html">Building categories and building codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../area/index.html">Area</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy_need/index.html">Energy need</a></li>
<li class="toctree-l1"><a class="reference internal" href="../heating_systems/index.html">Heating systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy_use/index.html">Energy use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geographical_distribution/index.html">Geographical distribution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="calibrating_the_model.html">Calibrating the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EBM - Energibruksmodell</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Geographical distribution</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user_guide/geographical_distribution.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="geographical-distribution">
<h1>Geographical distribution<a class="headerlink" href="#geographical-distribution" title="Link to this heading">ÔÉÅ</a></h1>
<p>The geographical distribution module <code class="docutils literal notranslate"><span class="pre">ebmgeodist</span></code> is an extension of the EBM model that enables the distribution of annual energy use
forecast results from EBM to finer geographical units, such as municipalities in our case.To use the module, you can
follow the instructions below.</p>
<p>Please, open your preferred terminal and follow the instructions below.</p>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading">ÔÉÅ</a></h2>
<p>The first thing you need to do is to open your preferred terminal. Then, you need to create the necessary input files. To do this, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>ebmgeodist<span class="w"> </span>--create-input
</pre></div>
</div>
<p>The command creates the necessary input files in a new directory called <code class="docutils literal notranslate"><span class="pre">üìÅinput</span></code> in the current working directory.</p>
<p>To run the actual geographical distribution module, it is sufficient to use the bare command with no options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>ebmgeodist
</pre></div>
</div>
<p>By default, the distribution keys are loaded from <code class="docutils literal notranslate"><span class="pre">üìÅinput</span></code>, and the results are written to the <code class="docutils literal notranslate"><span class="pre">üìÅoutput</span></code> directory.
If no options are specified, the module distributes energy consumption for all energy products across all building categories at the municipality level. If you want
to distribute a specific energy product, this can be done using the option <code class="docutils literal notranslate"><span class="pre">--energy-product</span></code>. For example, to distribute
district heating consumption, run: <code class="docutils literal notranslate"><span class="pre">--energy-product</span> <span class="pre">dh</span></code>.</p>
<p>By default and without using any option, the distribution keys for electricity are calculated inside the module using electricity consumption data from üßæ <a class="reference internal" href="../input_description.html#yearly-aggregated-elhub-data-parquet"><span class="std std-ref">yearly_aggregated_elhub_data.parquet</span></a> under <code class="docutils literal notranslate"><span class="pre">üìÅinput</span></code>.
If the file does not exist, the module will generate the distribution keys using Elhub API inside the module, assuming that you have
access to Elhub data via Azure Blob Storage.</p>
<p>The results are saved in four Excel files named üßæ <span class="xref std std-ref">{energy-product}_use_geographically_distributed.xlsx</span> under <code class="docutils literal notranslate"><span class="pre">üìÅoutput</span></code>, where <code class="docutils literal notranslate"><span class="pre">{energy-product}</span></code> is replaced by the name of the energy product being distributed (e.g., <code class="docutils literal notranslate"><span class="pre">electricity</span></code>, <code class="docutils literal notranslate"><span class="pre">fuelwood</span></code>, <code class="docutils literal notranslate"><span class="pre">dh</span></code>, etc.).</p>
</section>
<section id="additional-arguments">
<h2>Additional arguments<a class="headerlink" href="#additional-arguments" title="Link to this heading">ÔÉÅ</a></h2>
<p>The module supports several options to customize the distribution process. The available options are summarized in the table below:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Geographical distribution overview</span><a class="headerlink" href="#id1" title="Link to this table">ÔÉÅ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Energy product (option)</p></th>
<th class="head"><p>Building category (option)</p></th>
<th class="head"><p>Data source (option)</p></th>
<th class="head"><p>Years (option)</p></th>
<th class="head"><p>Output format (option)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>python -m ebmgeodist</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>local</p></td>
<td><p>2022-2024</p></td>
<td><p>wide</p></td>
</tr>
<tr class="row-odd"><td><p>python -m ebmgeodist energy-product</p></td>
<td><p>electricity, dh, fuelwood, fossilfuel</p></td>
<td><p>all</p></td>
<td><p>local</p></td>
<td><p>2022-2024</p></td>
<td><p>wide</p></td>
</tr>
<tr class="row-even"><td><p>python -m ebmgeodist building-category</p></td>
<td><p>all</p></td>
<td><p>residential, holiday-home, non-residential, all</p></td>
<td><p>local</p></td>
<td><p>2022-2024</p></td>
<td><p>wide</p></td>
</tr>
<tr class="row-odd"><td><p>python -m ebmgeodist source</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>azure, local</p></td>
<td><p>2022-2024</p></td>
<td><p>wide</p></td>
</tr>
<tr class="row-even"><td><p>python -m ebmgeodist years</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>local</p></td>
<td><p>2022, 2023, 2024, or a combination</p></td>
<td><p>wide</p></td>
</tr>
<tr class="row-odd"><td><p>python -m ebmgeodist start-end-years</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>local</p></td>
<td><p>2022-2024</p></td>
<td><p>Including only the start and end years</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The double dashes <code class="docutils literal notranslate"><span class="pre">--</span></code> before each option are required when running the module from the command line. In the table above the double dashes
are omitted for better readability. For more detailed information about each option, you can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>ebmgeodist<span class="w"> </span>--help
</pre></div>
</div>
<p>The option <code class="docutils literal notranslate"><span class="pre">local</span></code> means that the module will be using electricity consumption data loaded from üßæ <a class="reference internal" href="../input_description.html#yearly-aggregated-elhub-data-parquet"><span class="std std-ref">yearly_aggregated_elhub_data.parquet</span></a> under <code class="docutils literal notranslate"><span class="pre">üìÅinput</span></code> to generate the distribution keys for electricity.</p>
<p>The option <code class="docutils literal notranslate"><span class="pre">azure</span></code> means that the module will be using Elhub API to fetch electricity consumption data from Azure Blob Storage to generate the distribution keys for electricity.</p>
<p>For all other energy products, the distribution keys are always loaded from the input files under the <code class="docutils literal notranslate"><span class="pre">üìÅinput</span></code> folder.</p>
</div>
<p>The general syntax for running the module with specific options is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">ebmgeodist</span> <span class="o">&lt;--</span><span class="n">option</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The options in the table can be combined. For example, to distribute bioenergy (fuelwood) consumption for residential buildings at the municipality level
for all years, you can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>ebmgeodist<span class="w"> </span>--energy-product<span class="w"> </span>fuelwood<span class="w"> </span>--building-category<span class="w"> </span>residential<span class="w"> </span>--years<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">2024</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../geographical_distribution/index.html#geo-distribution-comprehensive-doc"><span class="std std-ref">Geographical distribution</span></a></dt><dd><p>For a more detailed description of the geographical distribution module, including input file formats and examples.</p>
</dd>
</dl>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../input_description.html" class="btn btn-neutral float-left" title="Input files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="configuration.html" class="btn btn-neutral float-right" title="Model configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The Norwegian Water Resources and Energy Directorate (NVE).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>